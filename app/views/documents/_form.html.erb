<%= simple_form_for @document do |f| %>
  <%= content_for :js_extra do %>
    <%= raw "var tag='#{escape_javascript render(partial: 'tag',
      locals: {is_dynamic: true, f: f, tag: nil})}';" %>
  <% end %>
  <%= show_error_messages(@document) %>
  <div class="field column_right">
    <strong><%= t('view.documents.barcode') %></strong>:
    <%= document_link_to_barcode(@document.code.blank? ? 0 : @document.code) %>
  </div>
  
  <%= f.input :code, as: :string, input_html: { autofocus: true, maxlength: 10 } %>
  <%= f.input :name %>
  <%= f.input :pages, as: :string, input_html: { maxlength: 5, disabled: true } %>
  <%= f.input :stock, as: :string, input_html: { maxlength: 5 } %>
  <%= show_document_media_field(f) %>
  <%= f.input :description %>
  
  <div class="field">
    <%= document_file_label f %>
    <%= f.input :file, label: false, input_html: {
      class: ('field_with_errors' unless @document.errors[:file_file_name].blank?) } %>
  </div>

  <%= f.input :enable, as: :boolean %>

  <section class="nested_items">
    <h2><%= t('menu.tags') %></h2>

    <div id="tags" class="items">
      <% @document.tags.each do |tag| %>
        <%= render partial: 'tag',
          locals: { is_dynamic: false, f: f, tag: tag } %>
      <% end %>
      <%= render partial: 'tag',
        locals: { is_dynamic: false, f: f, tag: nil } %>
    </div>
  </section>

  <div class="add_nested_item">
    <%= link_to t('view.documents.add_tag'), '#', id: 'add_tag_link',
      'data-template' => 'tag', 'data-container' => '#tags',
      'data-event' => 'addNestedItem',
      title: t('view.documents.add_tag_title') %>
  </div>
  
  <%= f.input :lock_version, as: :hidden %>
  <%= f.button :submit %>
<% end %>
<%= render partial: 'shared/notice', locals: {
  hide: true,
  message: t('view.documents.processing_document')
} %>