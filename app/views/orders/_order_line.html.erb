<% id = dynamic_object_id('order_line', f) %>
<div class="order_line nested_item" id="<%= id %>" data-price="<%= f.object.price %>">
  <div>
    <div class="nested_item_field">
      <%= f.object.document %>
      <%= f.input :document_id, as: :hidden %>
    </div>
    
    <%= f.input :copies, label: false, 
      input_html: { maxlength: 5, autocomplete: 'off', 
      class: 'price_modifier page_modifier'}, 
      wrapper_html: { class: 'nested_item_field'} %>
        
    <div class="nested_item_field expendable">
      <%= text_field_tag "document[#{f.object.document_id}][pages]",
        f.object.document.try(:pages),
        id: "order_line_pages_#{f.object.document_id}",
        class: 'price_modifier page_modifier', disabled: true %>
    </div>
    
    <%= f.input :price_per_copy, label: false, input_html: {
      disabled: true, class: 'price_modifier', autocomplete: 'off'},
      wrapper_html: { class: 'nested_item_field expendable'} %>
    <%= f.input :two_sided, as: :boolean, label: false, 
      input_html: { class: 'price_modifier' },
      wrapper_html: { class: 'nested_item_field' } %>
    
    <div class="nested_item_actions">
      <span class="money"><%= number_to_currency f.object.price %></span>
      <% unless disabled %>
        <%= link_to_remove_nested_item(f) %>
      <% end %>
      <%= link_to '&#xe054;'.html_safe, show_catalog_path(f.object.document),
        class: 'iconic details_link action_link expendable', remote: true,
        title: t('view.prints.document_details'),
        style: ('display: none;' unless f.object.document) %>
      <%= f.input :lock_version, as: :hidden %>
    </div>
    <div class="dynamic_details" id="<%= "document_details_#{id}" %>"></div>
  </div>
</div>